---
- name: Setup for the Ansible's Environment
  hosts: localhost
  gather_facts: yes
  tasks:
    - name: Add /etc/hosts
      blockinfile: |
        dest=/etc/hosts
        content="
        {% for node in nodes %}
        {{ node }}
        {% endfor %}"

    - name: Install sshpass for Authentication (RHEL/CentOS)
      when: ansible_os_family == "RedHat"
      yum:
        name: sshpass
        state: present

    - name: Install vim-enhanced (RHEL/CentOS)
      when: ansible_os_family == "RedHat"
      #when: ansible_facts['distribution'] == "CentOS"
      yum:
        name: vim-enhanced
        state: present

    - name: Install git (RHEL/CentOS)
      when: ansible_os_family == "RedHat"
      #when: ansible_facts['distribution'] == "CentOS"
      yum:
        name: git
        state: present

    - name: Install sshpass for Authentication (Debian/Ubuntu)
      when: ansible_os_family == "Debian"
      apt:
        name: sshpass
        state: present

    - name: Install vim-enhanced (Debian/Ubuntu)
      when: ansible_os_family == "Debian"
      #when: ansible_facts['distribution'] == "Ubuntu"
      apt:
        name: "vim"
        state: present

    - name: Install git (Debian/Ubuntu)
      when: ansible_os_family == "Debian"
      #when: ansible_facts['distribution'] == "Ubuntu"
      apt:
        name: "git"
        state: present